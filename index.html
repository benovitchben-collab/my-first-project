<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Demo Casino</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{
--bg:#0b0f1e;
--card:#151a33;
--accent:#4cff8f;
--danger:#ff4c4c;
--gold:#ffd24c;
}
*{box-sizing:border-box}
body{
margin:0;
background:radial-gradient(circle at top,#121633,#070a15);
color:#fff;
font-family:Inter,system-ui,sans-serif;
}
header{
display:flex;
justify-content:space-between;
align-items:center;
padding:12px;
background:rgba(10,12,25,.9);
backdrop-filter:blur(10px);
}
.balance{color:var(--gold);font-weight:700}
.card{
background:linear-gradient(180deg,#181d3a,#0f132b);
border-radius:16px;
padding:16px;
margin:12px;
box-shadow:0 0 30px rgba(0,0,0,.4);
}
button{
width:100%;
padding:14px;
margin-top:8px;
border:none;
border-radius:12px;
font-size:16px;
font-weight:700;
background:linear-gradient(135deg,var(--accent),#2ecc71);
color:#000;
cursor:pointer;
}
button.red{
background:linear-gradient(135deg,var(--danger),#c0392b);
color:#fff;
}
button:disabled{
opacity:.4;
cursor:not-allowed;
}
button.active-cash{
animation:pulse 1s infinite;
}
@keyframes pulse{
0%{box-shadow:0 0 0 rgba(76,255,143,.5)}
50%{box-shadow:0 0 20px rgba(76,255,143,1)}
100%{box-shadow:0 0 0 rgba(76,255,143,.5)}
}
.hidden{display:none}
input{
width:100%;
padding:12px;
border-radius:10px;
border:none;
font-size:16px;
margin-top:8px;
}
.menu button{margin-bottom:10px}

/* SLOT */
.reels{
display:flex;
justify-content:center;
gap:16px;
font-size:48px;
margin:20px 0;
animation:idle 2s infinite ease-in-out;
}
@keyframes idle{
0%,100%{transform:scale(1)}
50%{transform:scale(1.03)}
}

/* JETX */
#jet{
position:relative;
height:180px;
overflow:hidden;
background:linear-gradient(#0a0f2b,#020417);
border-radius:14px;
}
#plane{
position:absolute;
left:20px;
bottom:40px;
font-size:36px;
transition:.05s;
}
#mult{
position:absolute;
top:10px;
left:10px;
font-weight:800;
color:var(--accent);
}

/* ROULETTE */
#wheel{
width:200px;
height:200px;
border-radius:50%;
border:8px solid #222;
margin:20px auto;
background:conic-gradient(
red 0deg 45deg,
black 45deg 90deg,
red 90deg 135deg,
black 135deg 180deg,
red 180deg 225deg,
black 225deg 270deg,
red 270deg 315deg,
green 315deg 360deg
);
transition:transform 3s cubic-bezier(.1,.9,.2,1);
}

/* MINES */
.grid{
display:grid;
grid-template-columns:repeat(5,1fr);
gap:8px;
margin-top:10px;
}
.cell{
background:#222;
aspect-ratio:1;
border-radius:8px;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
cursor:pointer;
}
.cell.safe{background:#2ecc71}
.cell.bomb{background:#e74c3c}
</style>
</head>

<body>
<header>
<div id="user">üë§ Guest</div>
<div class="balance">üí∞ <span id="bal">0</span></div>
</header>

<!-- REG -->
<div id="reg" class="card">
<h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
<input id="nick" placeholder="–í–∞—à –Ω–∏–∫">
<button onclick="register()">–í–æ–π—Ç–∏</button>
</div>

<!-- MENU -->
<div id="menu" class="card hidden menu">
<button onclick="openGame('slots')">üé∞ Slots</button>
<button onclick="openGame('jetx')">‚úà JetX</button>
<button onclick="openGame('roulette')">üé° Roulette</button>
<button onclick="openGame('mines')">üí£ Mines</button>
</div>

<!-- SLOTS -->
<div id="slots" class="card hidden">
<h3>Slots (RTP 96%)</h3>
<div class="reels" id="reels">üçí üçã üçä</div>
<button onclick="spin()">SPIN</button>
<button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- JETX -->
<div id="jetx" class="card hidden">
<h3>JetX</h3>
<div id="jet">
<div id="mult">x1.00</div>
<div id="plane">‚úà</div>
</div>
<button onclick="startJet()">START</button>
<button id="cashBtn" class="red" onclick="cashOut()" disabled>üí∞ –ó–∞–±—Ä–∞—Ç—å</button>
<button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- ROULETTE -->
<div id="roulette" class="card hidden">
<h3>Roulette</h3>
<div id="wheel"></div>
<button onclick="spinRoulette()">SPIN</button>
<button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- MINES -->
<div id="mines" class="card hidden">
<h3>Mines</h3>
<div class="grid" id="grid"></div>
<button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let user = JSON.parse(localStorage.getItem("casino_user"));
let balance = user?.balance ?? 1000;

const balEl = document.getElementById("bal");
const userEl = document.getElementById("user");
const cashBtn = document.getElementById("cashBtn");

function init(){
reg.classList.add("hidden");
menu.classList.remove("hidden");
userEl.textContent="üë§ "+user.nick;
updateBalance();
}
if(user) init();

function register(){
const n = nick.value.trim();
if(!n) return;
user={nick:n,balance};
localStorage.setItem("casino_user",JSON.stringify(user));
init();
}

function updateBalance(){
balEl.textContent=balance;
user.balance=balance;
localStorage.setItem("casino_user",JSON.stringify(user));
}

function openGame(id){
document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function goBack(){
document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
menu.classList.remove("hidden");
}

/* SLOTS */
const icons=["üçí","üçã","üçä","‚≠ê","üíé"];
function spin(){
balance-=10;
let a=icons[rand()],b=icons[rand()],c=icons[rand()];
reels.textContent=`${a} ${b} ${c}`;
if(a===b && b===c) balance+=150;
updateBalance();
}

/* JETX */
let jetRun=false,t=0,crashAt=0,intv;
function startJet(){
if(jetRun) return;
jetRun=true;
t=0;
crashAt=Math.random()<0.96?(1.2+Math.random()*3):(4+Math.random()*10);
cashBtn.disabled=false;
cashBtn.classList.add("active-cash");
intv=setInterval(()=>{
t+=0.05;
let m=Math.exp(t/2);
mult.textContent="x"+m.toFixed(2);
plane.style.transform=`translate(${t*40}px,${-t*t*4}px)`;
if(m>=crashAt) stopJet();
},50);
}
function cashOut(){
if(!jetRun) return;
cashBtn.disabled=true;
cashBtn.classList.remove("active-cash");
balance+=Math.floor(50*Math.exp(t/2));
stopJet();
}
function stopJet(){
clearInterval(intv);
jetRun=false;
cashBtn.disabled=true;
cashBtn.classList.remove("active-cash");
updateBalance();
}

/* ROULETTE */
function spinRoulette(){
balance-=20;
let deg=360*5+Math.random()*360;
wheel.style.transform=`rotate(${deg}deg)`;
setTimeout(()=>{
if(Math.random()<0.48) balance+=40;
updateBalance();
},3000);
}

/* MINES */
const grid=document.getElementById("grid");
let bombs=[];
function initMines(){
grid.innerHTML="";
bombs=[];
for(let i=0;i<25;i++){
let d=document.createElement("div");
d.className="cell";
d.onclick=()=>openCell(d,i);
grid.appendChild(d);
}
while(bombs.length<5){
let r=Math.floor(Math.random()*25);
if(!bombs.includes(r)) bombs.push(r);
}
}
function openCell(el,i){
if(bombs.includes(i)){
el.textContent="üí£";
el.classList.add("bomb");
balance-=50;
}else{
el.textContent="üíé";
el.classList.add("safe");
balance+=20;
}
updateBalance();
}
initMines();

function rand(){return Math.floor(Math.random()*icons.length);}
</script>
</body>
</html>
